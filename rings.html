<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://unpkg.com/isotope-layout@3.0.6/dist/isotope.pkgd.min.js"></script>
<script>

// Initialize Isotope
document.addEventListener("DOMContentLoaded", function () {
    const grid = document.querySelector('.grid');

    // Initialize Isotope
    const iso = new Isotope(grid, {
        itemSelector: '.element-item',
        layoutMode: 'fitRows',
        getSortData: {
            name: '.name',
            subtype: '[data-subtype]'
        }
    });
	    // Force Isotope to properly layout after all elements are loaded
    window.addEventListener('load', function () {
        iso.arrange({ filter: '*' }); // Ensure all items are visible
    });
	
    // Dark mode styling
    document.body.style.backgroundColor = "#121212";
    document.body.style.color = "#ffffff";
    document.body.style.fontFamily = "Arial, sans-serif";

    // Apply grid styling
    
grid.style.display = "grid";
grid.style.gridTemplateColumns = "repeat(auto-fit, 150px)"; // Adjust column count based on item size
grid.style.gridGap = "15px"; // Ensure consistent spacing between items
grid.style.justifyContent = "center"; // Center items horizontally
grid.style.padding = "20px"; // Add padding around the grid
grid.style.margin = "0 auto"; // Center the grid container

    // Style grid items
const items = document.querySelectorAll('.element-item');
items.forEach(item => {
    item.style.display = "flex";
    item.style.flexDirection = "column";
    item.style.justifyContent = "space-between"; // Ensure spacing between content
    item.style.alignItems = "center";
    item.style.width = "150px"; // Fixed width
    item.style.height = "150px"; // Fixed height
    item.style.margin = "10px";
    item.style.backgroundColor = "#1e1e1e";
    item.style.color = "#ffffff";
    item.style.borderRadius = "10px";
    item.style.padding = "10px";
    item.style.boxShadow = "0 4px 8px rgba(0, 0, 0, 0.2)";
    item.style.textAlign = "center";
    item.style.overflow = "hidden";
});


// Style headings
const headings = document.querySelectorAll('.element-item .name');
headings.forEach(heading => {
    heading.style.fontSize = "12px";
    heading.style.fontWeight = "bold";
    heading.style.marginBottom = "25px"; // Add proper spacing
    heading.style.textAlign = "center";
    heading.style.whiteSpace = "normal";
    heading.style.overflow = "visible"; // Ensure no part of the text is hidden
    heading.style.display = "block"; // Ensure block layout for headings
    heading.style.lineHeight = "1.2em"; // Set line height for proper spacing
    heading.style.maxHeight = "2.4em"; // Limit height to two lines
    heading.style.textOverflow = "ellipsis"; // Add ellipsis for overflow
    heading.style.wordWrap = "break-word"; // Break words if they exceed container width
    heading.style.clipPath = "inset(0px 0px 0px)"; // Prevent text from overflowing without hiding it
});


   // Style subtypes
const subtypes = document.querySelectorAll('.element-item .subtype');
subtypes.forEach(subtype => {
    subtype.style.fontSize = "11px";
    subtype.style.color = "#aaaaaa";
    subtype.style.textAlign = "center";
    subtype.style.marginTop = "auto"; // Reserve space dynamically
    subtype.style.paddingTop = "15px"; // Add spacing from heading
    subtype.style.position = "absolute";
    subtype.style.bottom = "-5px"; // Keep subtype text at the bottom
    subtype.style.width = "100%"; // Ensure it doesnâ€™t leave the container
});


    // Style images
    const images = document.querySelectorAll('.element-item img');
    images.forEach(image => {
        image.style.maxWidth = "80px";
        image.style.maxHeight = "80px";
        image.style.marginBottom = "10px";
    });

    // Generate subtype filter buttons dynamically
    const subtypeSet = new Set();
    items.forEach(item => {
        const subtype = item.querySelector('.subtype').textContent.trim();
        subtypeSet.add(subtype);
    });

    const filterBar = document.createElement('div');
    filterBar.id = "filter-bar";
    filterBar.style.display = "flex";
    filterBar.style.justifyContent = "center";
    filterBar.style.flexWrap = "wrap";
    filterBar.style.gap = "10px";
    filterBar.style.marginBottom = "20px";

    const allButton = document.createElement('button');
    allButton.textContent = "Show All";
    allButton.dataset.filter = "*";
    allButton.style.backgroundColor = "#333333";
    allButton.style.color = "#ffffff";
    allButton.style.padding = "10px 20px";
    allButton.style.border = "none";
    allButton.style.borderRadius = "5px";
    allButton.style.cursor = "pointer";
    allButton.style.transition = "background-color 0.3s ease";
    allButton.classList.add('is-checked'); // Default selected
iso.arrange({ filter: '*' }); // Ensure all items are displayed on page load
updateButtonStyles(allButton); // Ensure the button visually appears selected

    allButton.addEventListener('click', () => {
        iso.arrange({ filter: '*' });
        updateButtonStyles(allButton);
    });
    filterBar.appendChild(allButton);

    subtypeSet.forEach(subtype => {
        const button = document.createElement('button');
        button.textContent = subtype;
        button.dataset.filter = `[data-subtype='${subtype}']`;
        button.style.backgroundColor = "#333333";
        button.style.color = "#ffffff";
        button.style.padding = "10px 20px";
        button.style.border = "none";
        button.style.borderRadius = "5px";
        button.style.cursor = "pointer";
        button.style.transition = "background-color 0.3s ease";
        button.addEventListener('click', () => {
            iso.arrange({ filter: `[data-subtype='${subtype}']` });
            updateButtonStyles(button);
        });
        filterBar.appendChild(button);
    });

    document.body.insertBefore(filterBar, grid);

    // Update button styles
    function updateButtonStyles(selectedButton) {
        const buttons = filterBar.querySelectorAll('button');
        buttons.forEach(button => {
            button.style.backgroundColor = "#333333";
            button.classList.remove('is-checked');
        });
        selectedButton.style.backgroundColor = "#555555";
        selectedButton.classList.add('is-checked');
    }
});

// Style subtypes
const subtypes = document.querySelectorAll('.element-item .subtype');
subtypes.forEach(subtype => {
    subtype.style.fontSize = "11px";
    subtype.style.color = "#aaaaaa";
    subtype.style.marginTop = "auto"; // Push the subtype to the bottom
    subtype.style.textAlign = "center";
});

document.addEventListener("DOMContentLoaded", function () {
    const tooltip = document.createElement('div');
    tooltip.id = 'tooltip';
    tooltip.style.position = 'absolute';
    tooltip.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
    tooltip.style.color = 'white';
    tooltip.style.padding = '5px 10px';
    tooltip.style.borderRadius = '5px';
    tooltip.style.opacity = '0';
    tooltip.style.transition = 'opacity 0.3s ease';
    tooltip.style.pointerEvents = 'none'; // Prevent interfering with hover events
    document.body.appendChild(tooltip);

    const items = document.querySelectorAll('.element-item');
    items.forEach(item => {
        const description = item.querySelector('.itemDescription').textContent.trim();

        item.addEventListener('mouseenter', (event) => {
            if (description) {
                tooltip.textContent = description || "No description available.";
                tooltip.style.opacity = '1';
                tooltip.style.left = `${event.pageX + 10}px`; // Position near cursor
                tooltip.style.top = `${event.pageY + 10}px`;
            }
        });

        item.addEventListener('mousemove', (event) => {
            tooltip.style.left = `${event.pageX + 10}px`;
            tooltip.style.top = `${event.pageY + 10}px`;
        });

        item.addEventListener('mouseleave', () => {
            tooltip.style.opacity = '0';
        });
    });
});

</script>

<style>
a {
color:inherit;
underline:inherit;
font-size:inherit;
text-decoration:none;
}
#tooltip {
    z-index: 1000;
    font-size: 12px;
    max-width: 200px;
    text-align: center;
    word-wrap: break-word;
}
.element-item .itemDescription {
    display: none; /* Hide the description within the grid */
}

</style>

<div class="grid">
    <div class="element-item Rings" data-category="Rings" data-subtype="Covenant">
        <img src="icons/Rings/Cat Covenant Ring.png" alt="Cat Covenant Ring" />
        <a href="Rings/Covenant/Cat Covenant Ring"><h3 class="name">Cat Covenant Ring</h3></a>
        <p class="subtype">Covenant</p>
        <p class="itemDescription">Answer Alvina's summoning. Acquired from Alvina upon joining the Forest Hunter Covenant in upper Darkroot Basin.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Covenant">
        <img src="icons/Rings/Darkmoon Blade Covenant Ring.png" alt="Darkmoon Blade Covenant Ring" />
        <h3 class="name">Darkmoon Blade Covenant Ring</h3>
        <p class="subtype">Covenant</p>
        <p class="itemDescription">Answer Dark Sun Gwyndolin's summoning.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Covenant">
        <img src="icons/Rings/Old Witch's Ring.png" alt="Old Witch's Ring" />
        <h3 class="name">Old Witch's Ring</h3>
        <p class="subtype">Covenant</p>
        <p class="itemDescription">Allows communication with Quelaag's Sister.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Covenant of Artorias.png" alt="Covenant of Artorias" />
        <h3 class="name">Covenant of Artorias</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Allows wearer to traverse the Abyss.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Covetous Gold Serpent Ring.png" alt="Covetous Gold Serpent Ring" />
        <h3 class="name">Covetous Gold Serpent Ring</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Boosts item discovery by 200.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Covetous Silver Serpent Ring.png" alt="Covetous Silver Serpent Ring" />
        <h3 class="name">Covetous Silver Serpent Ring</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Increases amount of souls gained by 20%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Dark Wood Grain Ring.png" alt="Dark Wood Grain Ring" />
        <h3 class="name">Dark Wood Grain Ring</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Changes rolling action.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Dusk Crown Ring.png" alt="Dusk Crown Ring" />
        <h3 class="name">Dusk Crown Ring</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Grants 50% more sorcery, miracle, and pyromancy castings, but halves health.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/East Wood Grain Ring.png" alt="East Wood Grain Ring" />
        <h3 class="name">East Wood Grain Ring</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Slows loss of weapon durability.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Lingering Dragoncrest Ring.png" alt="Lingering Dragoncrest Ring" />
        <h3 class="name">Lingering Dragoncrest Ring</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Extends the length of sorcery effects by 50%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Orange Charred Ring.png" alt="Orange Charred Ring" />
        <h3 class="name">Orange Charred Ring</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Reduces lava damage.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Rare Ring of Sacrifice.png" alt="Rare Ring of Sacrifice" />
        <h3 class="name">Rare Ring of Sacrifice</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Upon death nothing is lost, curse is nullified and ring breaks.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Red Tearstone Ring.png" alt="Red Tearstone Ring" />
        <h3 class="name">Red Tearstone Ring</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Boosts damage by 50% when health is below 20%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Ring of Fog.png" alt="Ring of Fog" />
        <h3 class="name">Ring of Fog</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Reduces presence to prevent discovery.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Ring of Sacrifice.png" alt="Ring of Sacrifice" />
        <h3 class="name">Ring of Sacrifice</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Lose nothing upon death, but ring breaks.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Ring of the Evil Eye.png" alt="Ring of the Evil Eye" />
        <h3 class="name">Ring of the Evil Eye</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Absorbs 30 HP from each enemy killed.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Ring of the Sun Princess.png" alt="Ring of the Sun Princess" />
        <h3 class="name">Ring of the Sun Princess</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Boosts miracle synergy.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Ring of the Sun's Firstborn.png" alt="Ring of the Sun's Firstborn" />
        <h3 class="name">Ring of the Sun's Firstborn</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Boosts damage of miracles by 20%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Rusted Iron Ring.png" alt="Rusted Iron Ring" />
        <h3 class="name">Rusted Iron Ring</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Improves balance on poor footing.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/Slumbering Dragoncrest Ring.png" alt="Slumbering Dragoncrest Ring" />
        <h3 class="name">Slumbering Dragoncrest Ring</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Wearer produces no sound.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Special Effect">
        <img src="icons/Rings/White Seance Ring.png" alt="White Seance Ring" />
        <h3 class="name">White Seance Ring</h3>
        <p class="subtype">Special Effect</p>
        <p class="itemDescription">Grants one additional attunement slot.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Bellowing Dragoncrest Ring.png" alt="Bellowing Dragoncrest Ring" />
        <h3 class="name">Bellowing Dragoncrest Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts the power of all sorceries and pyromancies by 20%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Bloodbite Ring.png" alt="Bloodbite Ring" />
        <h3 class="name">Bloodbite Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts bleed resistance by 400%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Blue Tearstone Ring.png" alt="Blue Tearstone Ring" />
        <h3 class="name">Blue Tearstone Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts defense by 50% when health is below 20%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Calamity Ring.png" alt="Calamity Ring" />
        <h3 class="name">Calamity Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Doubles damage taken.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Cloranthy Ring.png" alt="Cloranthy Ring" />
        <h3 class="name">Cloranthy Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Increases stamina regeneration.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Cursebite Ring.png" alt="Cursebite Ring" />
        <h3 class="name">Cursebite Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts curse resistance by 400%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Darkmoon Seance Ring.png" alt="Darkmoon Seance Ring" />
        <h3 class="name">Darkmoon Seance Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Grants one additional attunement slot.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Flame Stoneplate Ring.png" alt="Flame Stoneplate Ring" />
        <h3 class="name">Flame Stoneplate Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts flame defense by 50.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Havel's Ring.png" alt="Havel's Ring" />
        <h3 class="name">Havel's Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts max equip load by 50%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Hawk Ring.png" alt="Hawk Ring" />
        <h3 class="name">Hawk Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Extends bow range by 50%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Hornet Ring.png" alt="Hornet Ring" />
        <h3 class="name">Hornet Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts critical attack damage by 30%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Leo Ring.png" alt="Leo Ring" />
        <h3 class="name">Leo Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts counter attack damage of thrust weapons by 40%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Poisonbite Ring.png" alt="Poisonbite Ring" />
        <h3 class="name">Poisonbite Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts poison resistance by 400%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Ring of Favor and Protection.png" alt="Ring of Favor and Protection" />
        <h3 class="name">Ring of Favor and Protection</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts HP, stamina and equip load by 20%, however if the ring is removed it will break.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Ring of Steel Protection.png" alt="Ring of Steel Protection" />
        <h3 class="name">Ring of Steel Protection</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts physical defense by 50.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Speckled Stoneplate Ring.png" alt="Speckled Stoneplate Ring" />
        <h3 class="name">Speckled Stoneplate Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts lightning, magic and fire defense by 25.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Spell Stoneplate Ring.png" alt="Spell Stoneplate Ring" />
        <h3 class="name">Spell Stoneplate Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts magic defense by 50.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Thunder Stoneplate Ring.png" alt="Thunder Stoneplate Ring" />
        <h3 class="name">Thunder Stoneplate Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts lightning defense by 50.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Tiny Being's Ring.png" alt="Tiny Being's Ring" />
        <h3 class="name">Tiny Being's Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Increases HP by 5%.</p>
    </div>
    <div class="element-item Rings" data-category="Rings" data-subtype="Stat Affecting">
        <img src="icons/Rings/Wolf Ring.png" alt="Wolf Ring" />
        <h3 class="name">Wolf Ring</h3>
        <p class="subtype">Stat Affecting</p>
        <p class="itemDescription">Boosts poise by 40.</p>
    </div>
</div>
